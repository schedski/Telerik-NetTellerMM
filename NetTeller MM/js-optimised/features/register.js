define(["lib/jquery","netteller/session","netteller/security","lib/knockout","netteller/login","netteller/localstorage","netteller/pin","config/environment","ui/startup"],function(e,t,n,r,i,s,o,u){var a={status:r.observable(""),noClick:function(){o.pinMode()===o.pinModeEnum.Register?(i.reset(),s.setHasBeenAskedAboutPin(),e.mobile.changePage("#accounts")):o.pinMode()===o.pinModeEnum.RegisterFromSettings&&e.mobile.changePage("#settings")},yesClick:function(){o.pinMode(o.pinModeEnum.Register),e.mobile.changePage("#pinKeypad")},registerExistingPin:function(){t.registerPin("",f)}},f=function(t,r){var a=function(){if(r!==null){s.registerPin(r.PinLoginToken,r.TokenId),n.isTokenOwner(!0),n.isTokenVerified(!0),o.pinMode()===o.pinModeEnum.Register?e.mobile.changePage("#accounts"):o.pinMode()===o.pinModeEnum.RegisterFromSettings&&(o.settingsPageStatus(u.strings["msg.pinregistered"]),e.mobile.changePage("#settings"));return}f.status(t)};i.loginLoader.loadFinished(a)};t.viewModels.push(a),r.applyBindings(a,e("#register").get(0)),r.applyBindings(a,e("#registerExistingPin").get(0))})