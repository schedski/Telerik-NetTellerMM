define(["lib/jquery","netteller/rest","netteller/security","netteller/localstorage","config/environment"],function(e,t,n,r,i){var s={login:function(e,s,o,u){var a="Session/Login",f={CustomerNumber:e,Password:s,DeviceInfo:n.getDeviceInfo(),SessionToken:n.sessionToken,State:o,PinLoginTokenId:r.getTokenId()},l=function(e){e.Success===!0&&e.SessionToken!==undefined?u(!0,e.LoginMessage,e):u(!1,i.strings["msg.passwordloginfail"],e)};t.callService(a,f,l)},acceptLogin:function(e){var i="Session/AcceptLogin",o={DeviceInfo:n.getDeviceInfo(),SessionToken:n.sessionToken,AuthCode:n.getAuthCode(),PinLoginTokenId:r.getTokenId()},u=function(t){t.Success===!0&&t.SessionToken!==undefined?(s.memberNumber=t.MemberNumber,s.memberFirstName=t.FirstName,s.memberLastAppLoginDate=t.LastAppLoginDate,e(!0,t.LoginMessage,t)):e(!1,t.LoginMessage,t)};t.callService(i,o,u)},pinLogin:function(e,r,i,s,o){var u="Session/PinLogin",a={DeviceInfo:n.getDeviceInfo(),PinLoginToken:r,TokenId:i,Pin:e,IsAcceptingTermsAndConditions:s},f=function(e){e.Success===!0&&e.SessionToken!==undefined?o(!0,e.LoginMessage,e):o(!1,e.LoginMessage,e)};t.callService(u,a,f)},logout:function(){var r="Session/Logout";e.each(s.viewModels,function(e,t){t.reset!==undefined&&t.reset()}),memberNumber="",memberFirstName="",memberLastAppLoginDate="";var i=function(){n.endSession()};t.callService(r,{},i)},changePassword:function(e,r,i,s){var o="Session/ChangePassword",u={SessionToken:n.sessionToken,AuthCode:n.getAuthCode(),NewPassword:e,ConfirmNewPassword:r,ExistingPassword:i},a=function(e){e.Success===!0&&e.SessionToken!==undefined?s(!0,e.LoginMessage,e):s(!1,e.NotificationMessage,e)};t.callService(o,u,a)},registerPin:function(e,r){var s="Session/RegisterPin",o={Pin:e,SessionToken:n.sessionToken,AuthCode:n.getAuthCode()},u=function(e){e.Success===!0?r("Success",e):r(i.strings["msg.pinregisterfail"],null)};t.callService(s,o,u)},changePin:function(e,r,s){var o="Session/ChangePin",u={NewPin:e,NewPinConfirmation:r,SessionToken:n.sessionToken,AuthCode:n.getAuthCode()},a=function(e){e.Success===!0?s("Success",e):s(i.strings["msg.pinchangefail"],null)};t.callService(o,u,a)},deregisterDevice:function(e,r){var i="Session/DeregisterDevice",s={PinTokenId:e,SessionToken:n.sessionToken,AuthCode:n.getAuthCode()},o=function(e){e.Success===!0?r(!0,"Success"):r(!1,e.ErrorMessage)};t.callService(i,s,o)},hasPinCodeRegistered:function(e){var r="Session/HasPinCodeRegistered",i={SessionToken:n.sessionToken,AuthCode:n.getAuthCode()},s=function(t){t.Success===!0?e(!0,"Success",t):e(!1,t.ErrorMessage,t)};t.callService(r,i,s)},preLoginWorkflow:function(e,r,i){var s="Session/PreLoginWorkflow",o={PinToken:e,PinTokenId:r,DeviceInfo:n.getDeviceInfo()},u=function(e){e.Success===!0?i(!0,"Success",e):i(!1,e.ErrorMessage,e)};t.callService(s,o,u)},viewModels:[],memberNumber:"",memberFirstName:"",memberLastAppLoginDate:"",globalNotifications:[]};return s})